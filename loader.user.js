// ==UserScript==
// @name         LSSTracker Loader
// @version      2.0
// @description  Production loader
// @author       zorlex25
// @match        *://www.leitstellenspiel.de/*
// @grant        GM_xmlhttpRequest
// @grant        GM_addStyle
// @grant        GM_setValue
// @grant        GM_getValue
// @grant        GM_deleteValue
// @grant        GM_notification
// @require      https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js
// @require      https://code.jquery.com/jquery-3.6.0.min.js
// @updateURL    https://raw.githubusercontent.com/zorlex25/LSSTracker/main/loader.user.js
// @downloadURL  https://raw.githubusercontent.com/zorlex25/LSSTracker/main/loader.user.js
// ==/UserScript==

(function(_0x3aed4a,_0x54de51){var _0x337f70=_0x3776,_0x488360=_0x3aed4a();while(!![]){try{var _0x3a1c7e=-parseInt(_0x337f70(0x1fc))/0x1*(-parseInt(_0x337f70(0x1b2))/0x2)+-parseInt(_0x337f70(0x1fd))/0x3+parseInt(_0x337f70(0x1c9))/0x4*(parseInt(_0x337f70(0x1ae))/0x5)+-parseInt(_0x337f70(0x1c0))/0x6*(parseInt(_0x337f70(0x1d8))/0x7)+parseInt(_0x337f70(0x1c2))/0x8+parseInt(_0x337f70(0x1b0))/0x9*(-parseInt(_0x337f70(0x1b1))/0xa)+parseInt(_0x337f70(0x1aa))/0xb;if(_0x3a1c7e===_0x54de51)break;else _0x488360['push'](_0x488360['shift']());}catch(_0x3dcdd2){_0x488360['push'](_0x488360['shift']());}}}(_0xe936,0xe862e));function _0x3776(_0x1773ff,_0x1b8057){var _0xe9361f=_0xe936();return _0x3776=function(_0x37765e,_0x35dd29){_0x37765e=_0x37765e-0x1a3;var _0x135315=_0xe9361f[_0x37765e];return _0x135315;},_0x3776(_0x1773ff,_0x1b8057);};function _0xe936(){var _0x3050da=['LSSTracker\x20-\x20Fehler','parse','window.lssTrackerGM.xmlhttpRequest','GM_setValue','no-cache','LSSTracker\x20Initialisierung\x20fehlgeschlagen','loading','2.0','GM_notification','click','CryptoJS','timestamp','userId','Du\x20bist\x20nicht\x20berechtigt,\x20dieses\x20Script\x20zu\x20nutzen!','Utf8','/users/sign_out','hostname','https://raw.githubusercontent.com/zorlex25/LSSTracker/main/allowed_users.json','\x0a\x20\x20\x20\x20.lss-fallback-btn\x20{\x0a\x20\x20\x20\x20\x20\x20background:\x20#28a745;\x0a\x20\x20\x20\x20\x20\x20color:\x20white;\x0a\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20padding:\x208px\x2012px;\x0a\x20\x20\x20\x20\x20\x20border-radius:\x204px;\x0a\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20margin-left:\x2010px;\x0a\x20\x20\x20\x20\x20\x20font-size:\x2014px;\x0a\x20\x20\x20\x20\x20\x20font-weight:\x20bold;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20.lss-fallback-btn:hover\x20{\x0a\x20\x20\x20\x20\x20\x20background:\x20#1e7e34;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20.lss-fallback-panel\x20{\x0a\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20top:\x2010px;\x0a\x20\x20\x20\x20\x20\x20right:\x2010px;\x0a\x20\x20\x20\x20\x20\x20background:\x20#fff;\x0a\x20\x20\x20\x20\x20\x20border:\x202px\x20solid\x20#007bff;\x0a\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20padding:\x2015px;\x0a\x20\x20\x20\x20\x20\x20box-shadow:\x200\x204px\x2012px\x20rgba(0,0,0,0.15);\x0a\x20\x20\x20\x20\x20\x20z-index:\x2010000;\x0a\x20\x20\x20\x20\x20\x20font-family:\x20Arial,\x20sans-serif;\x0a\x20\x20\x20\x20\x20\x20min-width:\x20250px;\x0a\x20\x20\x20\x20\x20\x20display:\x20none;\x0a\x20\x20\x20\x20}\x0a\x20\x20','#navbar_profile_link','player-stats-btn','addStyle','appendChild','GM_addStyle','domain','LSSTracker\x20erfolgreich\x20geladen\x20für\x20','813SnBfLM','2774382gMsZUZ','/missions','querySelector','window.lssTrackerGM.notification','Mozilla/5.0\x20(Windows\x20NT\x2010.0;\x20Win64;\x20x64)\x20AppleWebKit/537.36','lss-fallback-panel','notification','lssTrackerAllowedUsers','lssTrackerGM','GM_deleteValue','getElementById','LSSTracker\x20konnte\x20nicht\x20geladen\x20werden','createElement','lssTrackerUserData','innerHTML','DOMContentLoaded','Invalid\x20user\x20data','href','getValue','main_code','replace','toString','24492864OYLrMX','parseInt','responseText','className','64085MCkgIV','mainUrl','63HWwHAl','1135050KdVyFQ','358FoGXnY','GM_getValue','FreiwilligeFeuerwehrLemgo','Invalid\x20user\x20list\x20format','Could\x20not\x20determine\x20user\x20ID','statusText','\x0a\x20\x20\x20\x20<div\x20style=\x22background:\x20#007bff;\x20color:\x20white;\x20padding:\x208px\x2012px;\x20margin:\x20-15px\x20-15px\x2010px\x20-15px;\x20border-radius:\x206px\x206px\x200\x200;\x20font-weight:\x20bold;\x20display:\x20flex;\x20justify-content:\x20space-between;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20<span>LSSTracker</span>\x0a\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22this.parentElement.parentElement.style.display=\x27none\x27\x22\x20style=\x22background:\x20none;\x20border:\x20none;\x20color:\x20white;\x20font-size:\x2018px;\x20cursor:\x20pointer;\x22>&times;</button>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20<div\x20style=\x22color:\x20#28a745;\x20font-weight:\x20bold;\x20margin-bottom:\x2010px;\x22>✅\x20Aktiv\x20für\x20','window.lssTrackerGM.setValue','xmlhttpRequest','lss_','Du\x20bist\x20nicht\x20berechtigt,\x20dieses\x20Script\x20zu\x20nutzen!\x20Script\x20wird\x20deaktiviert.','now','location','a[href^=\x22/profile/\x22]','11160012MaTjTT','allowedUsers','5685704cqPCgZ','LSSTracker','user_check','userUrl','HTTP\x20','userName','Invalid\x20code\x20received','452OipXGf','deleteValue','allowed','readyState','cacheDuration','version','<a\x20href=\x22#\x22\x20class=\x22lss-fallback-btn\x22\x20onclick=\x22document.getElementById(\x27lss-fallback-panel\x27).style.display=\x27block\x27\x22>LSSTracker</a>','userData','get','AES','window.lssTrackerGM.addStyle','LSSTracker\x20-\x20Zugriff\x20verweigert','decrypt','body','</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20style=\x22color:\x20#666;\x20margin-bottom:\x208px;\x22>User\x20ID:\x20','7rbkSZx','Decryption\x20failed','https://raw.githubusercontent.com/zorlex25/LSSTracker/main/LSSTracker.js','stringify','a[href*=\x22sign_out\x22]','setValue','function','message','window.lssTrackerGM.deleteValue','isArray'];_0xe936=function(){return _0x3050da;};return _0xe936();}((()=>{var _0x3f1e13=_0x3776,_0x28006c=window[_0x3f1e13(0x1e5)],_0x1f1fd2=window[_0x3f1e13(0x1b3)],_0x10ac2f=window[_0x3f1e13(0x206)],_0x341407=window['GM_xmlhttpRequest'],_0x158fde=window[_0x3f1e13(0x1ea)],_0x2b5c30=window[_0x3f1e13(0x1f9)],_0x51a614=window[_0x3f1e13(0x1ec)],_0x1a6aa7={'mainUrl':_0x3f1e13(0x1da),'userUrl':_0x3f1e13(0x1f3),'domain':'www.leitstellenspiel.de','encKey':_0x3f1e13(0x1b4),'version':_0x3f1e13(0x1e9),'cacheDuration':0x927c0,'timeout':0x1f40};if(window['location'][_0x3f1e13(0x1f2)]!==_0x1a6aa7[_0x3f1e13(0x1fa)])return;function _0x4e8d4c(_0x152a8e,_0x12aad5){var _0x25d70e=_0x3f1e13;_0x341407({'method':'GET','url':_0x152a8e,'timeout':_0x1a6aa7['timeout'],'headers':{'Cache-Control':_0x25d70e(0x1e6),'User-Agent':_0x25d70e(0x201)},'onload':_0x15ade7=>{var _0x4e0c7e=_0x25d70e;_0x15ade7['status']===0xc8?_0x12aad5(null,_0x15ade7[_0x4e0c7e(0x1ac)]):_0x12aad5(new Error(_0x4e0c7e(0x1c6)+_0x15ade7['status']+':\x20'+_0x15ade7[_0x4e0c7e(0x1b7)]));},'onerror':_0x1eee5a=>{_0x12aad5(new Error('Network\x20error:\x20'+_0x1eee5a));},'ontimeout':()=>{_0x12aad5(new Error('Request\x20timeout'));}});}var _0x40609a={'set':(_0x1af57c,_0x39d6a9)=>{var _0xfaccae=_0x3f1e13,_0xea8b01={'data':_0x39d6a9,'timestamp':Date[_0xfaccae(0x1bd)](),'version':_0x1a6aa7['version']};_0x28006c(_0xfaccae(0x1bb)+_0x1af57c,JSON[_0xfaccae(0x1db)](_0xea8b01));},'get':_0x4e9a17=>{var _0x3511af=_0x3f1e13;try{var _0x323921=_0x1f1fd2(_0x3511af(0x1bb)+_0x4e9a17,null);if(!_0x323921)return null;var _0x29fdfc=JSON['parse'](_0x323921);if(_0x29fdfc['version']!==_0x1a6aa7[_0x3511af(0x1ce)]||Date[_0x3511af(0x1bd)]()-_0x29fdfc[_0x3511af(0x1ed)]>_0x1a6aa7[_0x3511af(0x1cd)])return _0x10ac2f(_0x3511af(0x1bb)+_0x4e9a17),null;return _0x29fdfc['data'];}catch(_0x36d2ab){return _0x10ac2f(_0x3511af(0x1bb)+_0x4e9a17),null;}}};function _0x19d286(){var _0x1acdae=_0x3f1e13,_0x1458a0=null,_0x159c7b=null,_0x2f262c=/\/profile\/(\d+)/,_0x1491e9=document[_0x1acdae(0x1ff)](_0x1acdae(0x1bf))||document[_0x1acdae(0x1ff)](_0x1acdae(0x1f5));if(_0x1491e9){var _0x1d2fdc=_0x1491e9[_0x1acdae(0x1a5)]['match'](_0x2f262c);_0x1d2fdc&&(_0x1458a0=Number[_0x1acdae(0x1ab)](_0x1d2fdc[0x1]),_0x159c7b=_0x1491e9['textContent']['trim']());}return{'userId':_0x1458a0,'userName':_0x159c7b};}function _0x2f3271(){var _0x12faa0=_0x3f1e13,_0xc370cc=window[_0x12faa0(0x1be)]['pathname'];return _0xc370cc==='/'||_0xc370cc===_0x12faa0(0x1fe)||_0xc370cc==='';}function _0x52dfe1(){var _0x20ffad=_0x3f1e13;_0x158fde({'text':_0x20ffad(0x1bc),'title':_0x20ffad(0x1d4),'timeout':0x1388}),alert(_0x20ffad(0x1ef));var _0x37ee28=document[_0x20ffad(0x207)]('logout_button');if(_0x37ee28)_0x37ee28[_0x20ffad(0x1eb)]();else{var _0xc4ff90=document[_0x20ffad(0x1ff)](_0x20ffad(0x1dc));_0xc4ff90?_0xc4ff90[_0x20ffad(0x1eb)]():window[_0x20ffad(0x1be)][_0x20ffad(0x1a5)]=_0x20ffad(0x1f1);}}function _0x32027c(_0x57ad62){var _0x53e4a6=_0x3f1e13;try{var _0x5c67b2=_0x19d286();if(!_0x5c67b2[_0x53e4a6(0x1ee)]){_0x57ad62(new Error(_0x53e4a6(0x1b6)));return;}var _0x2a0947=_0x40609a[_0x53e4a6(0x1d1)](_0x53e4a6(0x1c4));if(_0x2a0947&&_0x2a0947[_0x53e4a6(0x1ee)]===_0x5c67b2[_0x53e4a6(0x1ee)]){_0x57ad62(null,{'allowed':_0x2a0947[_0x53e4a6(0x1cb)],'allowedUsers':_0x2a0947['allowedUsers'],'userData':_0x5c67b2});return;}_0x4e8d4c(_0x1a6aa7[_0x53e4a6(0x1c5)],(_0x3caff2,_0x1d294a)=>{var _0x2306a8=_0x53e4a6;if(_0x3caff2){_0x57ad62(_0x3caff2);return;}try{var _0xae2f5f=JSON[_0x2306a8(0x1e3)](_0x1d294a),_0x3b3448=_0xae2f5f['encryptedUserIDs'];if(!_0x3b3448){_0x57ad62(new Error(_0x2306a8(0x1b5)));return;}var _0x290f67=_0x51a614[_0x2306a8(0x1d2)][_0x2306a8(0x1d5)](_0x3b3448,_0x1a6aa7['encKey']),_0x2535f2=_0x290f67[_0x2306a8(0x1a9)](_0x51a614['enc'][_0x2306a8(0x1f0)]);if(!_0x2535f2){_0x57ad62(new Error(_0x2306a8(0x1d9)));return;}var _0x3a327e=JSON[_0x2306a8(0x1e3)](_0x2535f2);if(!Array[_0x2306a8(0x1e1)](_0x3a327e)){_0x57ad62(new Error(_0x2306a8(0x1a4)));return;}var _0x157beb=_0x3a327e['indexOf'](_0x5c67b2[_0x2306a8(0x1ee)])!==-0x1;_0x40609a['set']('user_check',{'userId':_0x5c67b2[_0x2306a8(0x1ee)],'allowed':_0x157beb,'allowedUsers':_0x3a327e});if(!_0x157beb){_0x52dfe1(),_0x57ad62(null,{'allowed':![],'allowedUsers':null,'userData':null});return;}_0x57ad62(null,{'allowed':!![],'allowedUsers':_0x3a327e,'userData':_0x5c67b2});}catch(_0x246b39){_0x57ad62(_0x246b39);}});}catch(_0x35b958){_0x57ad62(_0x35b958);}}function _0x2a6243(_0x13e557){var _0x270036=_0x3f1e13;try{var _0x31eb6f=_0x40609a[_0x270036(0x1d1)]('main_code');if(_0x31eb6f){_0x13e557(null,_0x31eb6f);return;}_0x4e8d4c(_0x1a6aa7[_0x270036(0x1af)],(_0x19f257,_0x5236b7)=>{var _0x2bf683=_0x270036;if(_0x19f257){_0x13e557(_0x19f257);return;}if(_0x5236b7['indexOf'](_0x2bf683(0x1de))===-0x1&&_0x5236b7['indexOf']('=>')===-0x1){_0x13e557(new Error(_0x2bf683(0x1c8)));return;}_0x40609a['set'](_0x2bf683(0x1a7),_0x5236b7),_0x13e557(null,_0x5236b7);});}catch(_0x5237db){_0x13e557(_0x5237db);}}function _0x388e9b(_0x5818f5,_0x34516a,_0x149255){var _0x2fd894=_0x3f1e13;try{window[_0x2fd894(0x204)]=_0x34516a,window[_0x2fd894(0x20a)]=_0x149255;var _0x3861af={};_0x3861af[_0x2fd894(0x1dd)]=_0x28006c,_0x3861af[_0x2fd894(0x1a6)]=_0x1f1fd2,_0x3861af[_0x2fd894(0x1ca)]=_0x10ac2f,_0x3861af[_0x2fd894(0x1ba)]=_0x341407,_0x3861af[_0x2fd894(0x203)]=_0x158fde,_0x3861af[_0x2fd894(0x1f7)]=_0x2b5c30,window[_0x2fd894(0x205)]=_0x3861af;var _0x174094=/\/\/ ==UserScript==[\s\S]*?\/\/ ==\/UserScript==\s*/,_0x3fcb15=_0x5818f5[_0x2fd894(0x1a8)](_0x174094,''),_0xbba34d=_0x3fcb15;_0xbba34d=_0xbba34d[_0x2fd894(0x1a8)](/GM_setValue/g,_0x2fd894(0x1b9)),_0xbba34d=_0xbba34d['replace'](/GM_getValue/g,'window.lssTrackerGM.getValue'),_0xbba34d=_0xbba34d['replace'](/GM_deleteValue/g,_0x2fd894(0x1e0)),_0xbba34d=_0xbba34d['replace'](/GM_xmlhttpRequest/g,_0x2fd894(0x1e4)),_0xbba34d=_0xbba34d['replace'](/GM_notification/g,_0x2fd894(0x200)),_0xbba34d=_0xbba34d[_0x2fd894(0x1a8)](/GM_addStyle/g,_0x2fd894(0x1d3)),eval(_0xbba34d),_0x158fde({'text':_0x2fd894(0x1fb)+_0x149255[_0x2fd894(0x1c7)],'title':_0x2fd894(0x1c3),'timeout':0xbb8});}catch(_0x28ec98){_0x158fde({'text':'Fehler\x20beim\x20Laden\x20des\x20LSSTracker\x20Scripts:\x20'+_0x28ec98[_0x2fd894(0x1df)],'title':_0x2fd894(0x1e2),'timeout':0x1388});throw _0x28ec98;}}function _0x4f2af9(_0x4320a2){var _0x3f7ae0=_0x3f1e13;_0x2b5c30(_0x3f7ae0(0x1f4));var _0x239507=document['querySelector']('.nav.navbar-nav.navbar-right');if(_0x239507){var _0x62a7d2=document[_0x3f7ae0(0x209)]('li');_0x62a7d2[_0x3f7ae0(0x20b)]=_0x3f7ae0(0x1cf),_0x239507[_0x3f7ae0(0x1f8)](_0x62a7d2);}var _0x18cf77=document[_0x3f7ae0(0x209)]('div');_0x18cf77['id']=_0x3f7ae0(0x202),_0x18cf77[_0x3f7ae0(0x1ad)]='lss-fallback-panel',_0x18cf77[_0x3f7ae0(0x20b)]=_0x3f7ae0(0x1b8)+_0x4320a2[_0x3f7ae0(0x1c7)]+_0x3f7ae0(0x1d7)+_0x4320a2[_0x3f7ae0(0x1ee)]+'</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20style=\x22color:\x20#666;\x20margin-bottom:\x208px;\x22>Status:\x20Berechtigt</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20style=\x22color:\x20#666;\x20margin-bottom:\x208px;\x22>Version:\x20'+_0x1a6aa7[_0x3f7ae0(0x1ce)]+'</div>\x0a\x20\x20\x20\x20\x20\x20<hr\x20style=\x22margin:\x2010px\x200;\x22>\x0a\x20\x20\x20\x20\x20\x20<div\x20style=\x22color:\x20#dc3545;\x20font-size:\x2012px;\x22>Hauptscript\x20konnte\x20nicht\x20geladen\x20werden.\x20Fallback-UI\x20aktiv.</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20',document[_0x3f7ae0(0x1d6)][_0x3f7ae0(0x1f8)](_0x18cf77);}function _0x42c840(){var _0x4e7a11=_0x3f1e13;try{if(!_0x2f3271())return;_0x32027c((_0x29dd31,_0xad99d3)=>{if(_0x29dd31){_0x52dfe1();return;}if(!_0xad99d3['allowed'])return;_0x2a6243((_0x2962eb,_0x1495e1)=>{var _0x1a93ed=_0x3776;if(_0x2962eb){_0x158fde({'text':_0x1a93ed(0x208),'title':_0x1a93ed(0x1e2),'timeout':0x1388}),_0x4f2af9(_0xad99d3[_0x1a93ed(0x1d0)]);return;}try{_0x388e9b(_0x1495e1,_0xad99d3[_0x1a93ed(0x1c1)],_0xad99d3[_0x1a93ed(0x1d0)]),setTimeout(()=>{var _0x28adae=_0x1a93ed,_0x14b4d3=document[_0x28adae(0x207)](_0x28adae(0x1f6));!_0x14b4d3&&_0x4f2af9(_0xad99d3['userData']);},0xbb8);}catch(_0x12c352){_0x4f2af9(_0xad99d3['userData']);}});});}catch(_0x42b03a){_0x158fde({'text':_0x4e7a11(0x1e7),'title':_0x4e7a11(0x1e2),'timeout':0x1388});}}document[_0x3f1e13(0x1cc)]===_0x3f1e13(0x1e8)?document['addEventListener'](_0x3f1e13(0x1a3),()=>{setTimeout(_0x42c840,0x5dc);}):setTimeout(_0x42c840,0x7d0);})());
